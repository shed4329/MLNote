# Project:LSTM 文本生成器

这是一个基于 LSTM 神经网络的文本生成工具，能够根据训练好的模型和种子文本生成新的文本内容。虽然作者实际跑出来效果不怎么样就是了。

## 功能说明

该项目包含两个主要脚本：
- `model.py`：用于训练文本生成模型并保存
- `Application.py`：使用训练好的模型进行文本生成

## 环境要求

- Python 3.x
- TensorFlow 2.x
- NumPy

可以通过以下命令安装所需依赖：
```bash
pip install tensorflow numpy
```

## 模型训练 (model.py)

### 功能介绍
`model.py` 用于从文本数据中训练 LSTM 模型，并保存训练好的模型和字符映射表。

### 使用方法

1. 准备训练数据：
   - 在项目根目录下创建 `data` 文件夹
   - 将所有训练文本文件（.txt 格式）放入 `data` 文件夹中

2. 运行训练脚本：
   ```bash
   python model.py
   ```

3. 训练参数（可在脚本中修改）：
   - `seq_length`：序列长度，默认为 256
   - `LSTM1_unit`、`LSTM2_unit`：LSTM 层单元数，默认为 256
   - `batch_size`：批处理大小，默认为 128
   - `epochs`：训练轮数，默认为 150

4. 输出结果：
   - 训练完成后会生成三个文件：
     - `model.h5`：训练好的模型
     - `char_to_idx.pkl`：字符到索引的映射表
     - `idx_to_char.pkl`：索引到字符的映射表

## 文本生成 (Application.py)

### 功能介绍
`Application.py` 用于加载训练好的模型，并根据用户提供的种子文本生成新的文本。

### 使用方法

1. 确保已存在训练好的模型文件（`model.h5`、`char_to_idx.pkl`、`idx_to_char.pkl`）

2. 运行生成脚本：
   ```bash
   python Application.py
   ```

3. 按照提示进行操作：
   - 输入模型文件路径（默认使用当前目录下的 `model.h5`）
   - 输入字符映射表文件路径（默认使用当前目录下的对应文件）
   - 输入种子文本（生成文本的起始内容）
   - 设置生成文本的长度（默认 200 个字符）
   - 设置温度参数（控制生成文本的随机性，0.1-5.0 之间，值越小越确定，越大越随机，默认 1.0）

4. 生成完成后，可以选择将结果保存到文件中

## 工作原理

1. **模型训练**：
   - 读取所有训练文本并合并
   - 将字符映射为数字索引
   - 生成输入序列和目标字符
   - 构建两层 LSTM 网络进行训练
   - 保存模型和映射表

2. **文本生成**：
   - 加载训练好的模型和映射表
   - 根据种子文本生成初始序列
   - 循环预测下一个字符并更新序列
   - 应用温度参数调整预测概率分布，控制生成文本的随机性
   - 输出并可选保存生成的文本

## 注意事项

- 训练数据越多、训练轮数越多，生成的文本质量通常越高
- 温度参数对生成结果影响较大，建议尝试不同的值以获得最佳效果
- 种子文本的质量和相关性会影响生成结果的质量
- 较长的生成长度可能导致文本逐渐变得无意义